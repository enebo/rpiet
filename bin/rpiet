#!/usr/bin/env ruby

require 'optparse'
require 'rpiet'

opts = OptionParser.new do |opts|
  opts.banner = "Usage: #{__FILE__} -d image_file"

  opts.on("-d", "--debug", "turn on debugging") do
    RPiet::Debug = true
  end
end

opts.parse!(ARGV)
opts.usage("You need to supply a source image filename.") unless ARGV.first
interpreter = RPiet::Interpreter.new(RPiet::Image.new('file:' + ARGV.first))
while(interpreter.step) do
end
